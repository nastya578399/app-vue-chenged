{"remainingRequest":"/Users/anastasiaromanova/Desktop/vue-app/node_modules/babel-loader/lib/index.js!/Users/anastasiaromanova/Desktop/vue-app/src/use/login-form.js","dependencies":[{"path":"/Users/anastasiaromanova/Desktop/vue-app/src/use/login-form.js","mtime":1611310990000},{"path":"/Users/anastasiaromanova/Desktop/vue-app/node_modules/cache-loader/dist/cjs.js","mtime":1634578680240},{"path":"/Users/anastasiaromanova/Desktop/vue-app/node_modules/babel-loader/lib/index.js","mtime":1634578680806}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudGltZXJzLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2FuYXN0YXNpYXJvbWFub3ZhL0Rlc2t0b3AvdnVlLWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCB7IHVzZUZpZWxkLCB1c2VGb3JtIH0gZnJvbSAndmVlLXZhbGlkYXRlJzsKaW1wb3J0ICogYXMgeXVwIGZyb20gJ3l1cCc7CmltcG9ydCB7IGNvbXB1dGVkLCB3YXRjaCB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IHVzZVN0b3JlIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwpleHBvcnQgZnVuY3Rpb24gdXNlTG9naW5Gb3JtKCkgewogIHZhciBzdG9yZSA9IHVzZVN0b3JlKCk7CiAgdmFyIHJvdXRlciA9IHVzZVJvdXRlcigpOwoKICB2YXIgX3VzZUZvcm0gPSB1c2VGb3JtKCksCiAgICAgIGhhbmRsZVN1Ym1pdCA9IF91c2VGb3JtLmhhbmRsZVN1Ym1pdCwKICAgICAgaXNTdWJtaXR0aW5nID0gX3VzZUZvcm0uaXNTdWJtaXR0aW5nLAogICAgICBzdWJtaXRDb3VudCA9IF91c2VGb3JtLnN1Ym1pdENvdW50OwoKICB2YXIgX3VzZUZpZWxkID0gdXNlRmllbGQoJ2VtYWlsJywgeXVwLnN0cmluZygpLnRyaW0oKS5yZXF1aXJlZCgn0J/QvtC20LDQu9GD0LnRgdGC0LAg0LLQstC10LTQuNGC0LUgZW1haWwnKS5lbWFpbCgn0J3QtdC+0LHRhdC+0LTQuNC80L4g0LLQstC10YHRgtC4INC60L7RgNGA0LXQutGC0L3Ri9C5IGVtYWlsJykpLAogICAgICBlbWFpbCA9IF91c2VGaWVsZC52YWx1ZSwKICAgICAgZUVycm9yID0gX3VzZUZpZWxkLmVycm9yTWVzc2FnZSwKICAgICAgZUJsdXIgPSBfdXNlRmllbGQuaGFuZGxlQmx1cjsKCiAgdmFyIE1JTl9MRU5HVEggPSA2OwoKICB2YXIgX3VzZUZpZWxkMiA9IHVzZUZpZWxkKCdwYXNzd29yZCcsIHl1cC5zdHJpbmcoKS50cmltKCkucmVxdWlyZWQoJ9Cf0L7QttCw0LvRg9C50YHRgtCwINCy0LLQtdC00LjRgtC1INC/0LDRgNC+0LvRjCcpLm1pbihNSU5fTEVOR1RILCAiXHUwNDFGXHUwNDMwXHUwNDQwXHUwNDNFXHUwNDNCXHUwNDRDIFx1MDQzRFx1MDQzNSBcdTA0M0NcdTA0M0VcdTA0MzZcdTA0MzVcdTA0NDIgXHUwNDMxXHUwNDRCXHUwNDQyXHUwNDRDIFx1MDQzQ1x1MDQzNVx1MDQzRFx1MDQ0Q1x1MDQ0OFx1MDQzNSAiLmNvbmNhdChNSU5fTEVOR1RILCAiIFx1MDQ0MVx1MDQzOFx1MDQzQ1x1MDQzMlx1MDQzRVx1MDQzQlx1MDQzRVx1MDQzMiIpKSksCiAgICAgIHBhc3N3b3JkID0gX3VzZUZpZWxkMi52YWx1ZSwKICAgICAgcEVycm9yID0gX3VzZUZpZWxkMi5lcnJvck1lc3NhZ2UsCiAgICAgIHBCbHVyID0gX3VzZUZpZWxkMi5oYW5kbGVCbHVyOwoKICB2YXIgaXNUb29NYW55QXR0ZW1wdHMgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gc3VibWl0Q291bnQudmFsdWUgPj0gMzsKICB9KTsKICB3YXRjaChpc1Rvb01hbnlBdHRlbXB0cywgZnVuY3Rpb24gKHZhbCkgewogICAgaWYgKHZhbCkgewogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gc3VibWl0Q291bnQudmFsdWUgPSAwOwogICAgICB9LCAxNTAwKTsKICAgIH0KICB9KTsKICB2YXIgb25TdWJtaXQgPSBoYW5kbGVTdWJtaXQoIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh2YWx1ZXMpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgnYXV0aC9sb2dpbicsIHZhbHVlcyk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgcm91dGVyLnB1c2goJy8nKTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNjsKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDApOwoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzAsIDZdXSk7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCkpOwogIHJldHVybiB7CiAgICBlbWFpbDogZW1haWwsCiAgICBwYXNzd29yZDogcGFzc3dvcmQsCiAgICBlRXJyb3I6IGVFcnJvciwKICAgIHBFcnJvcjogcEVycm9yLAogICAgZUJsdXI6IGVCbHVyLAogICAgcEJsdXI6IHBCbHVyLAogICAgb25TdWJtaXQ6IG9uU3VibWl0LAogICAgaXNTdWJtaXR0aW5nOiBpc1N1Ym1pdHRpbmcsCiAgICBpc1Rvb01hbnlBdHRlbXB0czogaXNUb29NYW55QXR0ZW1wdHMKICB9Owp9"},{"version":3,"sources":["/Users/anastasiaromanova/Desktop/vue-app/src/use/login-form.js"],"names":["useField","useForm","yup","computed","watch","useStore","useRouter","useLoginForm","store","router","handleSubmit","isSubmitting","submitCount","string","trim","required","email","value","eError","errorMessage","eBlur","handleBlur","MIN_LENGTH","min","password","pError","pBlur","isTooManyAttempts","val","setTimeout","onSubmit","values","dispatch","push"],"mappings":";;;;AAAA,SAAQA,QAAR,EAAkBC,OAAlB,QAAgC,cAAhC;AACA,OAAO,KAAKC,GAAZ,MAAqB,KAArB;AACA,SAAQC,QAAR,EAAkBC,KAAlB,QAA8B,KAA9B;AACA,SAAQC,QAAR,QAAuB,MAAvB;AACA,SAAQC,SAAR,QAAwB,YAAxB;AAEA,OAAO,SAASC,YAAT,GAAwB;AAC7B,MAAMC,KAAK,GAAGH,QAAQ,EAAtB;AACA,MAAMI,MAAM,GAAGH,SAAS,EAAxB;;AAF6B,iBAGqBL,OAAO,EAH5B;AAAA,MAGtBS,YAHsB,YAGtBA,YAHsB;AAAA,MAGRC,YAHQ,YAGRA,YAHQ;AAAA,MAGMC,WAHN,YAGMA,WAHN;;AAAA,kBAKmCZ,QAAQ,CACtE,OADsE,EAEtEE,GAAG,CACAW,MADH,GAEGC,IAFH,GAGGC,QAHH,CAGY,0BAHZ,EAIGC,KAJH,CAIS,oCAJT,CAFsE,CAL3C;AAAA,MAKfA,KALe,aAKtBC,KALsB;AAAA,MAKMC,MALN,aAKRC,YALQ;AAAA,MAK0BC,KAL1B,aAKcC,UALd;;AAc7B,MAAMC,UAAU,GAAG,CAAnB;;AAd6B,mBAgBsCtB,QAAQ,CACzE,UADyE,EAEzEE,GAAG,CACAW,MADH,GAEGC,IAFH,GAGGC,QAHH,CAGY,2BAHZ,EAIGQ,GAJH,CAIOD,UAJP,2JAIkDA,UAJlD,uDAFyE,CAhB9C;AAAA,MAgBfE,QAhBe,cAgBtBP,KAhBsB;AAAA,MAgBSQ,MAhBT,cAgBLN,YAhBK;AAAA,MAgB6BO,KAhB7B,cAgBiBL,UAhBjB;;AAyB7B,MAAMM,iBAAiB,GAAGxB,QAAQ,CAAC;AAAA,WAAMS,WAAW,CAACK,KAAZ,IAAqB,CAA3B;AAAA,GAAD,CAAlC;AAEAb,EAAAA,KAAK,CAACuB,iBAAD,EAAoB,UAAAC,GAAG,EAAI;AAC9B,QAAIA,GAAJ,EAAS;AACPC,MAAAA,UAAU,CAAC;AAAA,eAAMjB,WAAW,CAACK,KAAZ,GAAoB,CAA1B;AAAA,OAAD,EAA8B,IAA9B,CAAV;AACD;AACF,GAJI,CAAL;AAMA,MAAMa,QAAQ,GAAGpB,YAAY;AAAA,uEAAC,iBAAMqB,MAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEpBvB,KAAK,CAACwB,QAAN,CAAe,YAAf,EAA6BD,MAA7B,CAFoB;;AAAA;AAG1BtB,cAAAA,MAAM,CAACwB,IAAP,CAAY,GAAZ;AAH0B;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;;AAAA;AAAA;AAAA;AAAA,MAA7B;AAQA,SAAO;AACLjB,IAAAA,KAAK,EAALA,KADK;AAELQ,IAAAA,QAAQ,EAARA,QAFK;AAGLN,IAAAA,MAAM,EAANA,MAHK;AAILO,IAAAA,MAAM,EAANA,MAJK;AAKLL,IAAAA,KAAK,EAALA,KALK;AAMLM,IAAAA,KAAK,EAALA,KANK;AAOLI,IAAAA,QAAQ,EAARA,QAPK;AAQLnB,IAAAA,YAAY,EAAZA,YARK;AASLgB,IAAAA,iBAAiB,EAAjBA;AATK,GAAP;AAWD","sourcesContent":["import {useField, useForm} from 'vee-validate'\nimport * as yup from 'yup'\nimport {computed, watch} from 'vue'\nimport {useStore} from 'vuex'\nimport {useRouter} from 'vue-router'\n\nexport function useLoginForm() {\n  const store = useStore()\n  const router = useRouter()\n  const {handleSubmit, isSubmitting, submitCount} = useForm()\n\n  const {value: email, errorMessage: eError, handleBlur: eBlur} = useField(\n    'email',\n    yup\n      .string()\n      .trim()\n      .required('Пожалуйста введите email')\n      .email('Необходимо ввести корректный email')\n  )\n\n  const MIN_LENGTH = 6\n\n  const {value: password, errorMessage: pError, handleBlur: pBlur} = useField(\n    'password',\n    yup\n      .string()\n      .trim()\n      .required('Пожалуйста введите пароль')\n      .min(MIN_LENGTH, `Пароль не может быть меньше ${MIN_LENGTH} символов`)\n  )\n\n  const isTooManyAttempts = computed(() => submitCount.value >= 3)\n\n  watch(isTooManyAttempts, val => {\n    if (val) {\n      setTimeout(() => submitCount.value = 0, 1500)\n    }\n  })\n\n  const onSubmit = handleSubmit(async values => {\n    try {\n      await store.dispatch('auth/login', values)\n      router.push('/')\n    } catch (e) {\n    }\n  })\n\n  return {\n    email,\n    password,\n    eError,\n    pError,\n    eBlur,\n    pBlur,\n    onSubmit,\n    isSubmitting,\n    isTooManyAttempts\n  }\n}"]}]}