{"remainingRequest":"/Users/anastasiaromanova/Desktop/vue-app/node_modules/babel-loader/lib/index.js!/Users/anastasiaromanova/Desktop/vue-app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/anastasiaromanova/Desktop/vue-app/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/anastasiaromanova/Desktop/vue-app/src/views/Request.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/anastasiaromanova/Desktop/vue-app/src/views/Request.vue","mtime":1611322798000},{"path":"/Users/anastasiaromanova/Desktop/vue-app/node_modules/cache-loader/dist/cjs.js","mtime":1634578680240},{"path":"/Users/anastasiaromanova/Desktop/vue-app/node_modules/babel-loader/lib/index.js","mtime":1634578680806},{"path":"/Users/anastasiaromanova/Desktop/vue-app/node_modules/cache-loader/dist/cjs.js","mtime":1634578680240},{"path":"/Users/anastasiaromanova/Desktop/vue-app/node_modules/vue-loader-v16/dist/index.js","mtime":1634578680660}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2FuYXN0YXNpYXJvbWFub3ZhL0Rlc2t0b3AvdnVlLWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9hbmFzdGFzaWFyb21hbm92YS9EZXNrdG9wL3Z1ZS1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgeyByZWYsIG9uTW91bnRlZCwgY29tcHV0ZWQgfSBmcm9tICd2dWUnOwppbXBvcnQgeyB1c2VTdG9yZSB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyB1c2VSb3V0ZSwgdXNlUm91dGVyIH0gZnJvbSAndnVlLXJvdXRlcic7CmltcG9ydCBBcHBQYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvdWkvQXBwUGFnZSc7CmltcG9ydCBBcHBMb2FkZXIgZnJvbSAnLi4vY29tcG9uZW50cy91aS9BcHBMb2FkZXInOwppbXBvcnQgQXBwU3RhdHVzIGZyb20gJy4uL2NvbXBvbmVudHMvdWkvQXBwU3RhdHVzJzsKaW1wb3J0IHsgY3VycmVuY3kgfSBmcm9tICcuLi91dGlscy9jdXJyZW5jeSc7CmV4cG9ydCBkZWZhdWx0IHsKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICB2YXIgcm91dGUgPSB1c2VSb3V0ZSgpOwogICAgdmFyIHJvdXRlciA9IHVzZVJvdXRlcigpOwogICAgdmFyIHN0b3JlID0gdXNlU3RvcmUoKTsKICAgIHZhciBzdGF0dXMgPSByZWYoKTsKICAgIHZhciBsb2FkaW5nID0gcmVmKHRydWUpOwogICAgdmFyIHJlcXVlc3QgPSByZWYoe30pOwogICAgb25Nb3VudGVkKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgX3JlcXVlc3QkdmFsdWU7CgogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgbG9hZGluZy52YWx1ZSA9IHRydWU7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdyZXF1ZXN0L2xvYWRPbmUnLCByb3V0ZS5wYXJhbXMuaWQpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHJlcXVlc3QudmFsdWUgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIHN0YXR1cy52YWx1ZSA9IChfcmVxdWVzdCR2YWx1ZSA9IHJlcXVlc3QudmFsdWUpID09PSBudWxsIHx8IF9yZXF1ZXN0JHZhbHVlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVxdWVzdCR2YWx1ZS5zdGF0dXM7CiAgICAgICAgICAgICAgbG9hZGluZy52YWx1ZSA9IGZhbHNlOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSk7CiAgICB2YXIgaGFzQ2hhbmdlcyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHJlcXVlc3QudmFsdWUuc3RhdHVzICE9PSBzdGF0dXMudmFsdWU7CiAgICB9KTsKCiAgICB2YXIgcmVtb3ZlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdyZXF1ZXN0L3JlbW92ZScsIHJvdXRlLnBhcmFtcy5pZCk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKCcvJyk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiByZW1vdmUoKSB7CiAgICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCk7CgogICAgdmFyIHVwZGF0ZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmMyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIGRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGRhdGEgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHJlcXVlc3QudmFsdWUpLCB7fSwgewogICAgICAgICAgICAgICAgICBzdGF0dXM6IHN0YXR1cy52YWx1ZSwKICAgICAgICAgICAgICAgICAgaWQ6IHJvdXRlLnBhcmFtcy5pZAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ3JlcXVlc3QvdXBkYXRlJywgZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlcXVlc3QudmFsdWUuc3RhdHVzID0gc3RhdHVzLnZhbHVlOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlKCkgewogICAgICAgIHJldHVybiBfcmVmMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOwoKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGxvYWRpbmcsCiAgICAgIHJlcXVlc3Q6IHJlcXVlc3QsCiAgICAgIGN1cnJlbmN5OiBjdXJyZW5jeSwKICAgICAgcmVtb3ZlOiByZW1vdmUsCiAgICAgIHVwZGF0ZTogdXBkYXRlLAogICAgICBzdGF0dXM6IHN0YXR1cywKICAgICAgaGFzQ2hhbmdlczogaGFzQ2hhbmdlcwogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIEFwcFBhZ2U6IEFwcFBhZ2UsCiAgICBBcHBMb2FkZXI6IEFwcExvYWRlciwKICAgIEFwcFN0YXR1czogQXBwU3RhdHVzCiAgfQp9Ow=="},{"version":3,"sources":["/Users/anastasiaromanova/Desktop/vue-app/src/views/Request.vue"],"names":[],"mappings":";;;AA2BA,SAAQ,GAAR,EAAa,SAAb,EAAwB,QAAxB,QAAuC,KAAvC;AACA,SAAQ,QAAR,QAAuB,MAAvB;AACA,SAAQ,QAAR,EAAkB,SAAlB,QAAkC,YAAlC;AACA,OAAO,OAAP,MAAoB,0BAApB;AACA,OAAO,SAAP,MAAsB,4BAAtB;AACA,OAAO,SAAP,MAAsB,4BAAtB;AACA,SAAQ,QAAR,QAAuB,mBAAvB;AAEA,eAAe;AACb,EAAA,KADa,mBACL;AACN,QAAM,KAAI,GAAI,QAAQ,EAAtB;AACA,QAAM,MAAK,GAAI,SAAS,EAAxB;AACA,QAAM,KAAI,GAAI,QAAQ,EAAtB;AACA,QAAM,MAAK,GAAI,GAAG,EAAlB;AACA,QAAM,OAAM,GAAI,GAAG,CAAC,IAAD,CAAnB;AACA,QAAM,OAAM,GAAI,GAAG,CAAC,EAAD,CAAnB;AAEA,IAAA,SAAS,uEAAC;AAAA;;AAAA;AAAA;AAAA;AAAA;AACR,cAAA,OAAO,CAAC,KAAR,GAAgB,IAAhB;AADQ;AAAA,qBAEc,KAAK,CAAC,QAAN,CAAe,iBAAf,EAAkC,KAAK,CAAC,MAAN,CAAa,EAA/C,CAFd;;AAAA;AAER,cAAA,OAAO,CAAC,KAFA;AAGR,cAAA,MAAM,CAAC,KAAP,qBAAe,OAAO,CAAC,KAAvB,mDAAe,eAAe,MAA9B;AACA,cAAA,OAAO,CAAC,KAAR,GAAgB,KAAhB;;AAJQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD,GAAT;AAOA,QAAM,UAAS,GAAI,QAAQ,CAAC;AAAA,aAAM,OAAO,CAAC,KAAR,CAAc,MAAd,KAAyB,MAAM,CAAC,KAAtC;AAAA,KAAD,CAA3B;;AAEA,QAAM,MAAK;AAAA,0EAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACP,KAAK,CAAC,QAAN,CAAe,gBAAf,EAAiC,KAAK,CAAC,MAAN,CAAa,EAA9C,CADO;;AAAA;AAEb,gBAAA,MAAM,CAAC,IAAP,CAAY,GAAZ;;AAFa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAL,MAAK;AAAA;AAAA;AAAA,OAAX;;AAKA,QAAM,MAAK;AAAA,0EAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AACP,gBAAA,IADO,mCACI,OAAO,CAAC,KADZ;AACmB,kBAAA,MAAM,EAAE,MAAM,CAAC,KADlC;AACyC,kBAAA,EAAE,EAAE,KAAK,CAAC,MAAN,CAAa;AAD1D;AAAA;AAAA,uBAEP,KAAK,CAAC,QAAN,CAAe,gBAAf,EAAiC,IAAjC,CAFO;;AAAA;AAGb,gBAAA,OAAO,CAAC,KAAR,CAAc,MAAd,GAAuB,MAAM,CAAC,KAA9B;;AAHa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAL,MAAK;AAAA;AAAA;AAAA,OAAX;;AAMA,WAAO;AAAC,MAAA,OAAO,EAAP,OAAD;AAAU,MAAA,OAAO,EAAP,OAAV;AAAmB,MAAA,QAAQ,EAAR,QAAnB;AAA6B,MAAA,MAAM,EAAN,MAA7B;AAAqC,MAAA,MAAM,EAAN,MAArC;AAA6C,MAAA,MAAM,EAAN,MAA7C;AAAqD,MAAA,UAAU,EAAV;AAArD,KAAP;AACD,GA9BY;AA+Bb,EAAA,UAAU,EAAE;AAAC,IAAA,OAAO,EAAP,OAAD;AAAU,IAAA,SAAS,EAAT,SAAV;AAAqB,IAAA,SAAS,EAAT;AAArB;AA/BC,CAAf","sourcesContent":["<template>\n  <app-loader v-if=\"loading\"></app-loader>\n  <app-page back title=\"Заявка\" v-else-if=\"request\">\n    <p><strong>Имя владельца</strong>: {{request.fio}}</p>\n    <p><strong>Телефон</strong>: {{request.phone}}</p>\n    <p><strong>Сумма</strong>: {{currency(request.amount)}}</p>\n    <p><strong>Статус</strong>: <app-status :type=\"request.status\" /></p>\n\n    <div class=\"form-control\">\n      <label for=\"status\">Статус</label>\n      <select id=\"status\" v-model=\"status\">\n        <option value=\"done\">Завершен</option>\n        <option value=\"cancelled\">Отменен</option>\n        <option value=\"active\">Активен</option>\n        <option value=\"pending\">Выполняется</option>\n      </select>\n    </div>\n\n    <button class=\"btn danger\" @click=\"remove\">Удалить</button>\n    <button class=\"btn\" @click=\"update\" v-if=\"hasChanges\">Обновить</button>\n  </app-page>\n  <h3 v-else class=\"text-center text-white\">\n    Заявки с ID = {{$route.params.id}} нет.\n  </h3>\n</template>\n\n<script>\nimport {ref, onMounted, computed} from 'vue'\nimport {useStore} from 'vuex'\nimport {useRoute, useRouter} from 'vue-router'\nimport AppPage from '../components/ui/AppPage'\nimport AppLoader from '../components/ui/AppLoader'\nimport AppStatus from '../components/ui/AppStatus'\nimport {currency} from '../utils/currency'\n\nexport default {\n  setup() {\n    const route = useRoute()\n    const router = useRouter()\n    const store = useStore()\n    const status = ref()\n    const loading = ref(true)\n    const request = ref({})\n\n    onMounted(async () => {\n      loading.value = true\n      request.value = await store.dispatch('request/loadOne', route.params.id)\n      status.value = request.value?.status\n      loading.value = false\n    })\n\n    const hasChanges = computed(() => request.value.status !== status.value)\n\n    const remove = async () => {\n      await store.dispatch('request/remove', route.params.id)\n      router.push('/')\n    }\n\n    const update = async () => {\n      const data = {...request.value, status: status.value, id: route.params.id}\n      await store.dispatch('request/update', data)\n      request.value.status = status.value\n    }\n\n    return {loading, request, currency, remove, update, status, hasChanges}\n  },\n  components: {AppPage, AppLoader, AppStatus}\n}\n</script>\n\n<style scoped>\n\n</style>"],"sourceRoot":""}]}