{"remainingRequest":"/Users/anastasiaromanova/Desktop/vue-app/node_modules/babel-loader/lib/index.js!/Users/anastasiaromanova/Desktop/vue-app/src/store/modules/auth.module.js","dependencies":[{"path":"/Users/anastasiaromanova/Desktop/vue-app/src/store/modules/auth.module.js","mtime":1634579789858},{"path":"/Users/anastasiaromanova/Desktop/vue-app/node_modules/cache-loader/dist/cjs.js","mtime":1634578680240},{"path":"/Users/anastasiaromanova/Desktop/vue-app/node_modules/babel-loader/lib/index.js","mtime":1634578680806}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2FuYXN0YXNpYXJvbWFub3ZhL0Rlc2t0b3AvdnVlLWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9hbmFzdGFzaWFyb21hbm92YS9EZXNrdG9wL3Z1ZS1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgeyBlcnJvciB9IGZyb20gJy4uLy4uL3V0aWxzL2Vycm9yJzsKdmFyIFRPS0VOX0tFWSA9ICdqd3QtdG9rZW4nOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogZnVuY3Rpb24gc3RhdGUoKSB7CiAgICByZXR1cm4gewogICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oVE9LRU5fS0VZKQogICAgfTsKICB9LAogIG11dGF0aW9uczogewogICAgc2V0VG9rZW46IGZ1bmN0aW9uIHNldFRva2VuKHN0YXRlLCB0b2tlbikgewogICAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShUT0tFTl9LRVksIHRva2VuKTsKICAgIH0sCiAgICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChzdGF0ZSkgewogICAgICBzdGF0ZS50b2tlbiA9IG51bGw7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFRPS0VOX0tFWSk7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4oX3JlZiwgcGF5bG9hZCkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBjb21taXQsIGRpc3BhdGNoLCB1cmwsIF95aWVsZCRheGlvcyRwb3N0LCBkYXRhOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb21taXQgPSBfcmVmLmNvbW1pdCwgZGlzcGF0Y2ggPSBfcmVmLmRpc3BhdGNoOwogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE7CiAgICAgICAgICAgICAgICB1cmwgPSAiaHR0cHM6Ly9pZGVudGl0eXRvb2xraXQuZ29vZ2xlYXBpcy5jb20vdjEvYWNjb3VudHM6c2lnbkluV2l0aFBhc3N3b3JkP2tleT0iLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX0ZCX0tFWSk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KHVybCwgX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBwYXlsb2FkKSwge30sIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWUKICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgX3lpZWxkJGF4aW9zJHBvc3QgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgZGF0YSA9IF95aWVsZCRheGlvcyRwb3N0LmRhdGE7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldFRva2VuJywgZGF0YS5pZFRva2VuKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnY2xlYXJNZXNzYWdlJywgbnVsbCwgewogICAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDExOwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgICAgIGRpc3BhdGNoKCdzZXRNZXNzYWdlJywgewogICAgICAgICAgICAgICAgICB2YWx1ZTogZXJyb3IoX2NvbnRleHQudDAucmVzcG9uc2UuZGF0YS5lcnJvci5tZXNzYWdlKSwKICAgICAgICAgICAgICAgICAgdHlwZTogJ2RhbmdlcicKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMSwgMTFdXSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgZ2V0dGVyczogewogICAgdG9rZW46IGZ1bmN0aW9uIHRva2VuKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS50b2tlbjsKICAgIH0sCiAgICBpc0F1dGhlbnRpY2F0ZWQ6IGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZChfLCBnZXR0ZXJzKSB7CiAgICAgIHJldHVybiAhIWdldHRlcnMudG9rZW47CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/anastasiaromanova/Desktop/vue-app/src/store/modules/auth.module.js"],"names":["axios","error","TOKEN_KEY","namespaced","state","token","localStorage","getItem","mutations","setToken","setItem","logout","removeItem","actions","login","payload","commit","dispatch","url","process","env","VUE_APP_FB_KEY","post","returnSecureToken","data","idToken","root","value","response","message","type","Error","getters","isAuthenticated","_"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,KAAR,QAAoB,mBAApB;AACA,IAAMC,SAAS,GAAG,WAAlB;AAEA,eAAe;AACbC,EAAAA,UAAU,EAAE,IADC;AAEbC,EAAAA,KAFa,mBAEL;AACN,WAAO;AACLC,MAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqBL,SAArB;AADF,KAAP;AAGD,GANY;AAObM,EAAAA,SAAS,EAAE;AACTC,IAAAA,QADS,oBACAL,KADA,EACOC,KADP,EACc;AACrBD,MAAAA,KAAK,CAACC,KAAN,GAAcA,KAAd;AACAC,MAAAA,YAAY,CAACI,OAAb,CAAqBR,SAArB,EAAgCG,KAAhC;AACD,KAJQ;AAKTM,IAAAA,MALS,kBAKFP,KALE,EAKK;AACZA,MAAAA,KAAK,CAACC,KAAN,GAAc,IAAd;AACAC,MAAAA,YAAY,CAACM,UAAb,CAAwBV,SAAxB;AACD;AARQ,GAPE;AAiBbW,EAAAA,OAAO,EAAE;AACDC,IAAAA,KADC,uBAC2BC,OAD3B,EACoC;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAA7BC,gBAAAA,MAA6B,QAA7BA,MAA6B,EAArBC,QAAqB,QAArBA,QAAqB;AAAA;AAEjCC,gBAAAA,GAFiC,uFAEkDC,OAAO,CAACC,GAAR,CAAYC,cAF9D;AAAA;AAAA,uBAGlBrB,KAAK,CAACsB,IAAN,CAAWJ,GAAX,kCAAoBH,OAApB;AAA6BQ,kBAAAA,iBAAiB,EAAE;AAAhD,mBAHkB;;AAAA;AAAA;AAGhCC,gBAAAA,IAHgC,qBAGhCA,IAHgC;AAIvCR,gBAAAA,MAAM,CAAC,UAAD,EAAaQ,IAAI,CAACC,OAAlB,CAAN;AACAT,gBAAAA,MAAM,CAAC,cAAD,EAAiB,IAAjB,EAAuB;AAACU,kBAAAA,IAAI,EAAE;AAAP,iBAAvB,CAAN;AALuC;AAAA;;AAAA;AAAA;AAAA;AAOvCT,gBAAAA,QAAQ,CAAC,YAAD,EAAe;AACrBU,kBAAAA,KAAK,EAAE1B,KAAK,CAAC,YAAE2B,QAAF,CAAWJ,IAAX,CAAgBvB,KAAhB,CAAsB4B,OAAvB,CADS;AAErBC,kBAAAA,IAAI,EAAE;AAFe,iBAAf,EAGL;AAACJ,kBAAAA,IAAI,EAAE;AAAP,iBAHK,CAAR;AAPuC,sBAWjC,IAAIK,KAAJ,EAXiC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAa1C;AAdM,GAjBI;AAiCbC,EAAAA,OAAO,EAAE;AACP3B,IAAAA,KADO,iBACDD,KADC,EACM;AACX,aAAOA,KAAK,CAACC,KAAb;AACD,KAHM;AAIP4B,IAAAA,eAJO,2BAISC,CAJT,EAIYF,OAJZ,EAIqB;AAC1B,aAAO,CAAC,CAACA,OAAO,CAAC3B,KAAjB;AACD;AANM;AAjCI,CAAf","sourcesContent":["import axios from 'axios'\nimport {error} from '../../utils/error'\nconst TOKEN_KEY = 'jwt-token'\n\nexport default {\n  namespaced: true,\n  state() {\n    return {\n      token: localStorage.getItem(TOKEN_KEY)\n    }\n  },\n  mutations: {\n    setToken(state, token) {\n      state.token = token\n      localStorage.setItem(TOKEN_KEY, token)\n    },\n    logout(state) {\n      state.token = null\n      localStorage.removeItem(TOKEN_KEY)\n    }\n  },\n  actions: {\n    async login({ commit, dispatch }, payload) {\n      try {\n        const url = `https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${process.env.VUE_APP_FB_KEY}`\n        const {data} = await axios.post(url, {...payload, returnSecureToken: true})\n        commit('setToken', data.idToken)\n        commit('clearMessage', null, {root: true})\n      } catch (e) {\n        dispatch('setMessage', {\n          value: error(e.response.data.error.message),\n          type: 'danger'\n        }, {root: true})\n        throw new Error()\n      }\n    }\n  },\n  getters: {\n    token(state) {\n      return state.token\n    },\n    isAuthenticated(_, getters) {\n      return !!getters.token\n    }\n  }\n}"]}]}